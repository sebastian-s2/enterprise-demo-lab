---
# This title is used for search results
title: Generate Cloudvision Tags with eos_designs - Preview
---
<!--
  ~ Copyright (c) 2023-2024 Arista Networks, Inc.
  ~ Use of this source code is governed by the Apache License 2.0
  ~ that can be found in the LICENSE file.
  -->

# Generate CloudVision Tags - Preview

!!! warning

    The generation of CloudVision Tags in the `eos_designs` role is in preview mode.

    Everything is subject to change, is not supported and may not be complete.

    If you have any questions, please leverage the GitHub [discussions board](https://github.com/aristanetworks/avd/discussions)

`arista.avd.eos_designs` can generate CloudVision Tags that can be applied to interfaces and/or devices. These tags can be used on CloudVision for during Topology view generation,
or used in searches/filters to select devices based on tags values.

## Available Input Variables

--8<--
/docs/tables/cloudvision-tags.md
--8<--

## CloudVision Topology Tags

`arista.avd.eos_designs` can generate CloudVision Tags that assist CloudVision with rendering the Topology correctly.
It will attempt to generate what are called 'hints' for the following fields. These are picked up from the fabric variables if they are defined.

To enable generation of Topology Tags:

```yaml
generate_cv_tags:
  topology_hints: true
```

| Hint Tag Name              | Description                                                                           | Source of information                                                           |
| -------------------------- | ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| `topology_hint_type`       | Indicates whether the node is a leaf, spine, core device etc.                         | `cv_tags_topology_type` if set, else `node_type_keys.[].cv_tags_topology_type`. |
| `topology_hint_fabric`     | The overall fabric that the devices pertains to. Useful for multi-fabric deployments. | `fabric_name`                                                                   |
| `topology_hint_datacenter` | The datacenter to which the devices belongs. Helpful for multi-dc deployments.        | `dc_name`                                                                       |
| `topology_hint_pod`        | The pod to which the devices belongs.                                                 | `pod_name`                                                                      |
| `topology_hint_rack`       | The physical rack in which the device is located.                                     | `rack` defined on `node` or `node_group`                                        |

## CloudVision Custom Tags

Custom Tags can have either a static or a dynamic value. Dynamic values come from the `structured_config` generated by `eos_designs`.

Any value that is **not**:

- a list
- a dictionary
- a value in a list

can be defined as the value for a tag. This allows for tags to be generated with values that are calculated for that device. Refer to the example below.

For interfaces, only the `structured_config` for the interface itself is considered.

!!! tip
    Generate the `structured_config` first to get a better idea of what keys are available.

!!! warning
    - Tag names cannot have the name of any existing system tags on CloudVision. System tags cannot be emanded with this approach.
    - If the key specified in `data_path` is not found, the tag is not generated. This avoids having a lot of empty tags.
    - Custom structured configuration will *not* be considered during generation of tags. Only configuration generated by `eos_designs` itself.

To generate custom Tags with a static value:

```yaml
generate_cv_tags:
  device_tags:
    - name: mytag
      value: myvalue
  interface_tags:
    - name: myinterfacetag
      value: myinterfacevalue
```

To generate custom Tags with a dynamic value:

```yaml
generate_cv_tags:
  device_tags:
    - name: mydynamictag
      data_path: router_bgp.as
  interface_tags:
    - name: myinterfacetag
      data_path: peer_type
```
